{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Available Jobs | JobBoard</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
  <header class="navbar">
    <div class="logo">JDP<span>Jobs</span></div>
    <nav>
      <ul>
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'job_list' %}" class="active">Jobs</a></li>
        <li><a href="#">About</a></li>
        {% if user.is_authenticated %}
          <li><a href="{% url 'logout' %}">Logout</a></li>
        {% else %}
          <li><a href="{% url 'login' %}">Login</a></li>
          <li><a href="{% url 'register' %}">Register</a></li>
        {% endif %}
      </ul>
    </nav>
  </header>

  <div class="container">
    <h1 class="page-title">Available Jobs</h1>
    
    {% if user.is_authenticated %}
      <a href="{% url 'post_job' %}" class="btn btn-primary">+ Post a Job</a>
    {% else %}
      <p><a href="{% url 'login' %}" class="btn btn-primary">Login to Post a Job</a></p>
    {% endif %}

    <div class="job-list">
      {% for job in jobs %}
        <div class="job-card">
          <h3>{{ job.title }}</h3>
          <p><strong>{{ job.company }}</strong> â€” {{ job.location }}</p>
          <p>{{ job.description|truncatewords:25 }}</p>
          <div class="job-actions">
            <a href="{% url 'job_detail' job.id %}" class="btn btn-outline-primary">View Details</a>
            {% if user.is_authenticated and user != job.posted_by %}
              <a href="{% url 'apply_job' job.id %}" class="btn btn-primary">Apply Now</a>
            {% elif not user.is_authenticated %}
              <a href="{% url 'login' %}" class="btn btn-primary">Login to Apply</a>
            {% endif %}
          </div>
        </div>
      {% empty %}
        <div class="no-jobs">
          <p>No jobs available yet.</p>
          {% if user.is_authenticated %}
            <a href="{% url 'post_job' %}" class="btn btn-primary">Be the first to post a job!</a>
          {% else %}
            <a href="{% url 'register' %}" class="btn btn-primary">Register to post jobs</a>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>

  <footer>
    <p>Â© 2025 JobBoard. Crafted with ðŸ’™ by Sofia.</p>
  </footer>
</body>
</html>